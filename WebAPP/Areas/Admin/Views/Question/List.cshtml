@{
    ViewData["Active"] = "pageQuanLyCauHoi";
    ViewData["ActiveChild"] = "pageDanhsachcauhoi";
}

<div class="form-group mb-3">
    <label class="form-label">Chọn chủ đề & Phòng thi</label>
    <select class="form-control " id="categoryId" name="categoryId" style="overflow: hidden;">
        @foreach (var item in ViewBag.listcat)
        {
            <option value="@item.Value">@item.Text</option>
        }
    </select>
</div>
<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="pills-tracnghiem-tab" data-bs-toggle="pill" data-bs-target="#pills-tracnghiem" type="button" role="tab" aria-controls="pills-tracnghiem" aria-selected="true">
            <i class="bi-folder2-open"></i>
            Câu hỏi trắc nghiệm
            <span class="badge badge-sm bg-dark ">
                2
            </span>
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="pills-tuluan-tab" data-bs-toggle="pill" data-bs-target="#pills-tuluan" type="button" role="tab" aria-controls="pills-tuluan" aria-selected="false">
            <i class="bi-folder2-open"></i>
            Câu hỏi tự luận
        </button>
    </li>
</ul>
<div class="tab-content" id="pills-tabContent">
    <div class="tab-pane fade show active" id="pills-tracnghiem" role="tabpanel" aria-labelledby="pills-tracnghiem-tab" tabindex="0">
        <div id="listQuestion"></div>
    </div>
    <div class="tab-pane fade" id="pills-tuluan" role="tabpanel" aria-labelledby="pills-tuluan-tab" tabindex="0">
        <div id="listQuestionTuLuan"></div>
    </div>
</div>


<script>
    $(document).ready(function(){
        var firstselect = $("select[name='categoryId']").val();
        $.ajax({
            url: "GetAllByCategoryId",
            type: "POST",
            data: {
                id: firstselect,
            },
            success: function (result) {
                $("#listQuestion").html(result);
            },
        });
        $.ajax({
            url: "GetAllTuLuanByCategoryId",
            type: "POST",
            data: {
                id: firstselect,
            },
            success: function (result) {
                $("#listQuestionTuLuan").html(result);
            },
        });

        $('#categoryId').on('change',function(){
            var id = $(this).val();
            $.ajax({
                url: "GetAllByCategoryId",
                type: "POST",
                data: {
                    id: id,
                },
                success: function (result) {
                    $("#listQuestion").html(result);
                },
            });
            $.ajax({
                url: "GetAllTuLuanByCategoryId",
                type: "POST",
                data: {
                    id: id,
                },
                success: function (result) {
                    $("#listQuestionTuLuan").html(result);
                },
            });
        })
       
    })
</script>
